<!DOCTYPE html>
<html lang="en">
  <head class="head">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  
    <!-- <meta property="og:url" content="https://www.collinsomoney.com" /> -->
    <meta
      name="keywords"
      content="current events, breaking news, global news, local news, political updates, world affairs, technology news, science updates, businessnews,m entertainment news, health news, environmental issues, social issues, sport highlights, investigative journalism"
    />

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="English" />
    <meta name="author" content="Collins Ojete" />
    <title>Collins Blog</title>
    <!-- favicon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="./favicon/site.webmanifest" />
    <!-- css -->
    <link rel="stylesheet" href="./css/single-article.css" />

    <!-- fontawesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />

    <style></style>
  </head>
  <body>
    <!-- top header -->
    <div class="top-header">
      <div>
        <ul class="info">
          <a href="/login"><li>Sign In/Join</li></a>
        </ul>

        <!-- <ul class="time">
          <li>Sat, Oct 7</li>
          <li>|</li>
          <li>12:00pm</li>
        </ul> -->
      </div>
    </div>

    <div class="header">
      <div class="mobile">
        <div class="other">
          <div class="mobile-view">
            <img src="./logo/logo.png" class="logo img" alt="logo" />
            <span class="bars" id="bars"><i class="fas fa-bars"></i></span>
            <span class="close bars" id="close"
              ><i class="fa-solid fa-xmark"></i
            ></span>
          </div>

          <div class="desk">
            <ul class="menu">
              <a href="/newsBlog"><li class="news">News</li></a>
              <a href="/moneyBlog"><li>Make money</li></a>
              <a href="/insuranceBlog"><li>Insurance</li></a>
              <a href="/bankBlog"><li>Bank Products</li></a>
              <a href="/fintechBlog"><li>Fintech</li></a>
              <a href="/productBlog"><li>Products/Commodities</li></a>
              <a href="/eventBlog"><li>Events</li></a>
              <a href="/foodBlog"><li>Food Bank</li></a>
            </ul>

            <ul class="socials">
              <a
                href="https://www.facebook.com/helptogrowfoundation?mibextid=ZbWKwL"
                target="_blank"
                ><li>
                  <span><i class="fab fa-facebook"></i></span></li
              ></a>
              <a href="https://wa.link/00d97l" target="_blank"
                ><li>
                  <span><i class="fab fa-whatsapp"></i></span></li
              ></a>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- start -->
    <!-- banner -->
    <div class="banner-section">
      <div class="banner-center">
        <div class="banner-img">
          <!-- <img src="https://res.cloudinary.com/dsrtdywmf/image/upload/v1699196892/collinsoblog/tmp-1-1699196887387_of0rfk.jpg" class="banner-image img" alt="">-->
          <div class="vid-container"></div>
        </div>
      </div>
    </div>

    <!-- <div class="text-blog">
    <div class="home">
        <a href="/"><span><i class="fas fa-home"></i></span> Home Page</a>
      </div>
      </div> -->

    <div class="single-section">
      <div class="sing" width="100%">
        <h3 class="title"></h3>
        <p class="desc"></p>
      </div>
    </div>

    <div class="fb-share">
      <button class="share-btn button btn" id="fb-share">
        <i class="fas fa-share"></i>share post
      </button>
    </div>

    <form class="form">
      <input
        type="text"
        class="form-control"
        placeholder="Type your article id"
        id="article"
        hidden
      />
      <input
        type="text"
        class="form-control"
        placeholder="Type your comment"
        id="comment-input"
      />
      <button type="submit" class="sub-btn btn" id="comment-btn">
        Comment
      </button>
    </form>

    <div class="comment-section" id="comment-info">
      <!-- <div class="comment-image">
        <img src="https://res.cloudinary.com/dsrtdywmf/image/upload/v1699196892/collinsoblog/tmp-1-1699196887387_of0rfk.jpg" class="comment-img img" alt="">
    </div>

    <div class="comment-text">
        <p class="name">Admin</p>

        <h4 class="comment-socials">
            <span><i class="fab fa-facebook"></i></span>
        <span><i class="fab fa-whatsapp"></i></span>
        </h4>

        <p class="date">Nov 12, 2023</p>
        <p class="comment">Nice One fro admin. What do you think</p>
    </div> -->
    </div>

    <!-- footer -->

    <div class="footer">
      <div class="footer-center">
        <span
          >&copy;collinsomoney.com. All rights reserved
          <span class="footer-year"></span>
        </span>
        <ul class="footer-info">
          <a href="/about"><li>About</li></a>
          <a href="/advertise"><li>Advertise</li></a>
          <a href="/contact"><li>Contact</li></a>
        </ul>
      </div>
    </div>

    <script>
      const barsBtn = document.querySelector('#bars');
      const closeBtn = document.querySelector('#close');
      const deskDOM = document.querySelector('.desk');

      barsBtn.addEventListener('click', () => {
        deskDOM.classList.toggle('show');
        barsBtn.style.display = 'none';
        closeBtn.classList.toggle('show');
      });

      closeBtn.addEventListener('click', () => {
        closeBtn.classList.remove('show');
        barsBtn.style.display = 'block';
        deskDOM.classList.remove('show');
      });

      const submitBtn = document.querySelector('#submit');
      const inputControl = document.querySelector('.input-control');

      let date3 = new Date();
      const footerYearDOM = document.querySelector('.footer-year');
      const footerYear = date3.getFullYear();
      date3 = date3.toLocaleString();
      footerYearDOM.textContent = footerYear;

      // const timeDOM = document.querySelector('.time');

      // timeDOM.innerHTML = `<li>${date3}</li>`;

      const months = [
        'Jan',
        'Feb',
        'Mar',
        'Apr',
        'May',
        'Jun',
        'Jul',
        'Aug',
        'Sep',
        'Oct',
        'Nov',
        'Dec',
      ];
      const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thur', 'Fri', 'Sat'];

      const articleInput = document.querySelector('#article');

      const params7 = window.location.search;
      const urlID7 = new URLSearchParams(params7).get('id');

      const shareFunc = async() => {
        try {
          const response = await fetch(`/api/v1/article/${urlID7}`, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json',
            },
          });

          const data = await response.json();
          let article = data.article;

          const {
            _id: id,
            title,
            category,
            description,
            image,
            video,
          } = article;

const head = document.querySelector('.head')
const meta = document.createElement('meta')
meta.setAttribute('property', 'og:image')
meta.setAttribute('content',`${image}`)
head.appendChild(meta)

const meta2 = document.createElement('meta')
meta2.setAttribute('property', 'og:video')
meta2.setAttribute('content',`${video}`)
head.appendChild(meta2)


const meta3 = document.createElement('meta')
meta3.setAttribute('property', 'og:video:width')
meta3.setAttribute('content', '350')
head.appendChild(meta3)

const meta4 = document.createElement('meta')
meta4.setAttribute('property', 'og:video:height')
meta4.setAttribute('content', '200')
head.appendChild(meta4)

const meta5 = document.createElement('meta')
meta5.setAttribute('property', 'og:video:duration')
meta5.setAttribute('content', '300')
head.appendChild(meta5)

const meta6 = document.createElement('meta')
meta6.setAttribute('property', 'og:title')
meta6.setAttribute('content', `${title}`)
head.appendChild(meta6)

const meta7 = document.createElement('meta')
meta7.setAttribute('name', 'title')
meta7.setAttribute('content', `${title}`)
head.appendChild(meta7)

const meta8 = document.createElement('meta')
meta8.setAttribute('property', 'og:url')
meta8.setAttribute('content', `https://www.collinsomoney.com?id=${id}`)
head.appendChild(meta8)

 
         
            
        } catch (error) {
          console.log(error);
        }
      }

      shareFunc()


      const params2 = window.location.search;
      const urlID = new URLSearchParams(params2).get('id');

      window.addEventListener('load', () => {
        window.localStorage.clear();
      });
      const getArticle = async () => {
        try {
          const response = await fetch(`/api/v1/article/${urlID}`, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json',
            },
          });

          const data = await response.json();
          let article = data.article;

          const {
            _id: id,
            title,
            category,
            description,
            image,
            video,
          } = article;



  const fbShareBtn = document.querySelector('#fb-share');

          const navUrl =
            'https://www.facebook.com/sharer/sharer.php?u=' +
            `https://www.collinsomoney.com/single-article?id=${id}`;

          function shareFacebook() {
            window.open(navUrl, '_blank');
          }

          fbShareBtn.addEventListener('click', shareFacebook);

          const descDOM = document.querySelector('.desc');
          const bannerImgDOM = document.querySelector('.banner-img');

          articleInput.value = id;

          let articleId = (articleInput.value = id);

          const idStore = localStorage.setItem('articleId', articleId);

          if (response.status === 200) {
            const titleDOM = document.querySelector('.title');

            const vidCont = document.querySelector('.vid-container');

            if (video) {
              // bannerImgDOM.innerHTML = ` <video controls id="vid-test">
              //         <source src="${video}" type="video/mp4" size="576">
              //    </video>`
              const vidMain = document.createElement('video');
              vidMain.setAttribute('id', 'vid-test');
              vidMain.setAttribute('controls', true);
              vidMain.setAttribute('muted', true);
              vidMain.setAttribute('autoplay', true);
              vidMain.setAttribute('loop', true);
              vidMain.src = `${video}`;

              vidCont.appendChild(vidMain);
            } else {
              bannerImgDOM.innerHTML = `<img src="${image}"class="banner-image img" alt="" height="200vh"> `;
            }

            titleDOM.textContent = title;
            descDOM.innerHTML = `${description}`;
          }
        } catch (error) {
          console.log(error);
        }
      };

      getArticle();

      const commentInput = document.querySelector('#comment-input');
      const commentBtn = document.querySelector('#comment-btn');
      const nameDOM = document.querySelector('.name');
      const dateDOM = document.querySelector('.date');
      const commentDOM = document.querySelector('.comment');

      commentBtn.addEventListener('click', async (e) => {
        e.preventDefault();

        const message = commentInput.value;
        const article = articleInput.value;

        try {
          commentBtn.textContent = 'sending..';
          const response = await fetch('/api/v1/comment', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ message, article }),
          });
          const data = await response.json();

          if (response.status === 201) {
            commentInput.value = '';
            commentBtn.textContent = 'comment';

            location.reload();
          } else {
            commentBtn.textContent = 'comment failed';
          }
        } catch (error) {
          console.log(error);
          commentBtn.textContent = 'comment failed';
          window.location = '/login';
        }
      });

      //     window.addEventListener('DOMContentLoaded', async() => {

      // })

      const params6 = window.location.search;
      const urlID6 = new URLSearchParams(params6).get('id');

      const mapComment = async () => {
        const artId = urlID6;

        console.log(artId);
        try {
          const response = await fetch(`/api/v1/comment/${artId}/article`, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json',
            },
          });

          const data = await response.json();
          const comment = data.comment;
          console.log(comment);

          const commentInfo = document.querySelector('#comment-info');

          commentInfo.innerHTML = comment
            .map((comment) => {
              const {
                _id: id,
                message,
                user: {
                  name: name,
                  facebook: facebook,
                  tiktok: tiktok,
                  image: image,
                },
                createdAt,
              } = comment;

              let commentDate = new Date(createdAt);

              let commentMonth = commentDate.getMonth();
              commentMonth = months[commentMonth];
              const commentYear = commentDate.getFullYear();
              const commentDay = commentDate.getDate();
              console.log(commentMonth, commentDay, commentYear);

              return `
            <div class="comment-image">
                <img src="${image}" class="comment-img img" alt="">
                <span class="comment">${message}</span>
            </div>
            <div class="comment-image">
                
                <span class="comment">${name.toUpperCase()}</span>
                <span class="comment">${commentMonth} ${commentDay}, ${commentYear}</span>
            </div>

           
            `;
            })
            .join('');
        } catch (error) {
          console.log(error);
        }
      };

      mapComment();
    </script>

    <!-- in page ads -->
    <!-- <script>
    (function(enuz){
    var d = document,
        s = d.createElement('script'),
        l = d.scripts[d.scripts.length - 1];
    s.settings = enuz || {};
    s.src = "\/\/frighteningship.com\/a\/Wv5\/wgY.Wnd\/l\/Qq2x9tk\/ZqT\/9G6tb\/2s5NlCSoWRQ\/9YNLDAkezTMoD\/U\/0OOwCH0R0\/OPTOMMwTN-TpQW5j";
    l.parentNode.insertBefore(s, l);
    })({})
    </script> -->
  </body>
</html>
